{"version":3,"file":"dmg-read-more/index.js","mappings":"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","sources":["webpack://dmg-read-more/./src/dmg-read-more/edit.js","webpack://dmg-read-more/./src/dmg-read-more/editor.scss","webpack://dmg-read-more/./src/dmg-read-more/save.js","webpack://dmg-read-more/external window [\"wp\",\"blockEditor\"]","webpack://dmg-read-more/external window [\"wp\",\"blocks\"]","webpack://dmg-read-more/external window [\"wp\",\"components\"]","webpack://dmg-read-more/external window [\"wp\",\"element\"]","webpack://dmg-read-more/external window \"ReactJSXRuntime\"","webpack://dmg-read-more/webpack/bootstrap","webpack://dmg-read-more/webpack/runtime/compat get default export","webpack://dmg-read-more/webpack/runtime/define property getters","webpack://dmg-read-more/webpack/runtime/hasOwnProperty shorthand","webpack://dmg-read-more/webpack/runtime/make namespace object","webpack://dmg-read-more/./src/dmg-read-more/index.js"],"sourcesContent":["// Import the requiredWordPress components\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { PanelBody, TextControl, Button } from '@wordpress/components';\nimport { useState, useEffect } from '@wordpress/element';\nimport { useBlockProps } from '@wordpress/block-editor';\n\n// Import the editor.scss file\nimport './editor.scss';\n\n// Define the number of posts to fetch per page\nconst POSTS_PER_PAGE = 10;\n\n// Define the Edit component\nexport default function Edit({ attributes, setAttributes }) {\n\t// Define the variable and functions for the search, page, posts, total posts, and loading\n\tconst [search, setSearch] = useState('');\n\tconst [page, setPage] = useState(1);\n\tconst [posts, setPosts] = useState([]);\n\tconst [totalPosts, setTotalPosts] = useState(0);\n\tconst [loading, setLoading] = useState(false);\n\n\t// Define the block props to be used in the render\n\tconst blockProps = useBlockProps({ className: 'dmg-read-more' });\n\n\t// Fetch posts, using the WordPress REST API\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\t// Search by ID or title\n\t\tif (/^\\d+$/.test(search)) {\n\t\t\t// If search is a number, search by post ID to find a single post\n\t\t\tfetch(`/wp-json/wp/v2/posts/${search}`)\n\t\t\t\t.then(res => {\n\t\t\t\t\t// Check if the response is OK (status 200)\n\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Return null for non-existent post\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(data => {\n\t\t\t\t\tsetPosts(data ? [data] : []);\n\t\t\t\t\tsetTotalPosts(data ? 1 : 0);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\t// If search is not a number, search by title. Paginate the results\n\t\t\tfetch(`/wp-json/wp/v2/posts?per_page=${POSTS_PER_PAGE}&page=${page}&search=${encodeURIComponent(search)}&orderby=date&order=desc`)\n\t\t\t\t.then(res => {\n\t\t\t\t\tsetTotalPosts(Number(res.headers.get('X-WP-Total')));\n\t\t\t\t\treturn res.json();\n\t\t\t\t})\n\t\t\t\t.then(data => {\n\t\t\t\t\tsetPosts(data || []);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tsetPosts([]);\n\t\t\t\t\tsetTotalPosts(0);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [search, page]);\n\n\t// Calculate the total number of pages\n\tconst totalPages = Math.ceil(totalPosts / POSTS_PER_PAGE);\n\n\t// Render the component\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title=\"Select Blog Post\" initialOpen={true}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel=\"Search (title or ID)\"\n\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\tonChange={v => { setPage(1); setSearch(v); }}\n\t\t\t\t\t\tplaceholder=\"Type to find post…\"\n\t\t\t\t\t/>\n\t\t\t\t\t{loading && <p>Loading…</p>}\n\t\t\t\t\t{!loading && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{/* Map the posts to buttons */}\n\t\t\t\t\t\t\t{posts.map(post => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tkey={post.id}\n\t\t\t\t\t\t\t\t\tonClick={() => setAttributes({\n\t\t\t\t\t\t\t\t\t\tlinkText: post.title.rendered,\n\t\t\t\t\t\t\t\t\t\tlinkUrl: post.link\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={attributes.linkUrl === post.link ? 'read-more-button post-selected' : 'read-more-button'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{post.title.rendered}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{/* Show the pagination buttons, if there is more than one page */}\n\t\t\t\t\t\t\t{totalPosts > POSTS_PER_PAGE && (\n\t\t\t\t\t\t\t\t<div style={{ marginTop: 8 }}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setPage(page - 1)}\n\t\t\t\t\t\t\t\t\t>Previous</Button>\n\t\t\t\t\t\t\t\t\t<span style={{ margin: \"0 8px\" }}>Page {page} of {totalPages}</span>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tdisabled={page === totalPages}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setPage(page + 1)}\n\t\t\t\t\t\t\t\t\t>Next</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{/* Show the selected post hyperlink */}\n\t\t\t<p {...blockProps}>\n\t\t\t\t{attributes.linkUrl && attributes.linkText ? (\n\t\t\t\t\t<a href={attributes.linkUrl} target=\"_blank\" rel=\"noopener noreferrer\">Read More: {attributes.linkText}</a>\n\t\t\t\t) : \"Select a post in the block settings on the right.\"}\n\t\t\t</p>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// Define the Save component\nexport default function Save({ attributes }) {\n\treturn (\n\t\t// Show the selected post hyperlink\n\t\t<p className=\"dmg-read-more\">\n\t\t\t{attributes.linkUrl && attributes.linkText ? (\n\t\t\t\t<a href={attributes.linkUrl} target=\"_blank\" rel=\"noopener noreferrer\">{attributes.linkText}</a>\n\t\t\t) : \"No post selected.\"}\n\t\t</p>\n\t);\n}\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\n\n// Register the block type\nregisterBlockType(metadata.name, {\n\t// Define the attributes for the block\n\tattributes: {\n\t\t// Define the link URL attribute\n\t\tlinkUrl: {\n\t\t\ttype: 'string',\n\t\t\tdefault: ''\n\t\t},\n\t\tlinkText: {\n\t\t\ttype: 'string',\n\t\t\tdefault: ''\n\t\t}\n\t},\n\n\t// Define the edit component\n\tedit: Edit,\n\n\t// Define the save component\n\tsave,\n});\n"],"names":["InspectorControls","PanelBody","TextControl","Button","useState","useEffect","useBlockProps","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","POSTS_PER_PAGE","Edit","attributes","setAttributes","search","setSearch","page","setPage","posts","setPosts","totalPosts","setTotalPosts","loading","setLoading","blockProps","className","test","fetch","then","res","ok","json","data","encodeURIComponent","Number","headers","get","catch","totalPages","Math","ceil","children","title","initialOpen","label","value","onChange","v","placeholder","map","post","onClick","linkText","rendered","linkUrl","link","id","style","marginTop","disabled","margin","href","target","rel","Save","registerBlockType","save","metadata","name","type","default","edit"],"sourceRoot":""}